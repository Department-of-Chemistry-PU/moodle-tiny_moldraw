{"version":3,"file":"embed.min.js","sources":["../src/embed.js"],"sourcesContent":["// This file is part of Moodle - https://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <https://www.gnu.org/licenses/>.\n\n/**\n * Common values helper for the Moodle tiny_keteditor plugin.\n *\n * @module      tiny_keteditor/embed\n * @copyright   2024 Venkatesan Rangarajan <venkatesanrpu@gmail.com>\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport {get_string as getString} from 'core/str';\nimport Templates from 'core/templates';\nimport Modal from 'core/modal';\nimport Config from 'core/config';\nimport {exception as displayException} from 'core/notification';\n\nexport const KetcherEmbed = class {\n    editor = null;\n    constructor(editor) {\n        this.editor = editor;\n    }\n    init = async() => {\n        const modal = await Modal.create({\n            title: getString('buttonNameTitle', 'tiny_keteditor'),\n            show: true,\n            removeOnClose: true,\n        });\n        Templates.renderForPromise('tiny_keteditor/ketcher_template',{})\n        .then(({\n                html,\n                js\n            }) => {\n            Templates.appendNodeContents(modal.getBody(), html, js);\nconst scripturl = new URL(`${Config.wwwroot}/lib/editor/tiny/plugins/keteditor/ketcher/static/js/main.963f80c2.js`);\nvar script = document.createElement('script');\nscript.src = scripturl.toString();\ndocument.body.appendChild(script); // Append the script to the body\nconst sketchurl = new URL(`${Config.wwwroot}/lib/editor/tiny/plugins/keteditor/ketcher/sketch.js`);\nvar script = document.createElement('script');\nscript.src = sketchurl.toString();\nvar button = document.createElement('button');\nbutton.id = \"actionButton\";\nbutton.className = \"btn btn-primary\";\nbutton.textContent = \"Save\";\ndocument.body.appendChild(button, script);\nconst cssurl = new URL(`${Config.wwwroot}/lib/editor/tiny/plugins/keteditor/ketcher/static/css/main.3fc9c0f8.css`);\nvar link = document.createElement('link');\nlink.href = cssurl.toString();\nlink.rel = 'stylesheet';\ndocument.head.appendChild(link); // Append the link to the head\n        })\n        .catch((error) => displayException(error));\n    };\n};\n"],"names":["editor","constructor","init","async","modal","Modal","create","title","show","removeOnClose","renderForPromise","then","_ref","html","js","appendNodeContents","getBody","scripturl","URL","Config","wwwroot","script","document","createElement","src","toString","body","appendChild","sketchurl","button","id","className","textContent","cssurl","link","href","rel","head","catch","error"],"mappings":";;;;;;;4OA6B4B,MACxBA,OAAS,KACTC,YAAYD,aACHA,OAASA,OAElBE,KAAOC,gBACGC,YAAcC,eAAMC,OAAO,CAC7BC,OAAO,mBAAU,kBAAmB,kBACpCC,MAAM,EACNC,eAAe,uBAETC,iBAAiB,kCAAkC,IAC5DC,MAAKC,WAACC,KACCA,KADDC,GAECA,4BAEMC,mBAAmBX,MAAMY,UAAWH,KAAMC,UAC1DG,UAAY,IAAIC,IAAK,GAAEC,gBAAOC,iFAChCC,OAASC,SAASC,cAAc,WAC7BC,IAAMP,UAAUQ,WACvBH,SAASI,KAAKC,YAAYN,cACpBO,UAAY,IAAIV,IAAK,GAAEC,gBAAOC,mEAChCC,QAAAA,OAASC,SAASC,cAAc,WAC7BC,IAAMI,UAAUH,eACnBI,OAASP,SAASC,cAAc,UACpCM,OAAOC,GAAK,eACZD,OAAOE,UAAY,kBACnBF,OAAOG,YAAc,OACrBV,SAASI,KAAKC,YAAYE,OAAQR,cAC5BY,OAAS,IAAIf,IAAK,GAAEC,gBAAOC,sFAC7Bc,KAAOZ,SAASC,cAAc,QAClCW,KAAKC,KAAOF,OAAOR,WACnBS,KAAKE,IAAM,aACXd,SAASe,KAAKV,YAAYO,SAEjBI,OAAOC,QAAU,2BAAiBA"}